# <center>实验7 HTTP协议分析与测量</center>

<center>班级：软件20-29		学号：20192302201		姓名：何庆晟</center>

## **1．实验目的**

- 了解HTTP协议及其报文结构
- 了解HTTP操作过程：TCP三次握手、请求和响应交互
- 掌握基于`tcpdump`和`wireshark`软件进行HTTP数据包抓取和分析技术

## **2．实验环境**

- 硬件要求：阿里云云主机ECS 一台。

- 软件要求：Linux/ Windows 操作系统

## **3．实验内容**

使用`wget`下载新疆大学主页**[**www.xju.edu.cn**](http://www.xju.edu.cn)**，利用`tcpdump`抓包并利用`wireshark`分析。

1) 浏览器运行HTTP版本1还是1.1？服务器运行的是什么版本的HTTP？

2) 你的电脑的IP地址是什么？服务器呢？

3) 从服务器返回到浏览器的状态代码是什么？

4) 您在服务器上检索到的HTML文件是在什么时候修改的？

5) 有多少字节的内容被返回到浏览器？

6) 除以上已回答过的字段外，头部还有哪些字段？在数据包内容窗口中检查原始数据，是否有未在数据包列表中显示的头部？ 

## **4．实验结果与分析**

### 1. 下载新疆大学主页并抓包

![image-20220607144819476](https://s2.loli.net/2022/06/07/IFScZVzToMAhDnd.png)

### 2. 使用`wireshark`对抓取文件进行分析

#### 2.1 对http协议进行筛选

![image-20220607150400507](https://s2.loli.net/2022/06/07/cVTMD8wmz9RJyNG.png)

通过抓包结果可以看到，客户端向服务器请求一个简单的HTML文件，服务器将该文件返回给客户端。

#### 2.2 问题解答

> 1. 浏览器运行HTTP版本1还是1.1？服务器运行的是什么版本的HTTP？
>
>    浏览器运行的HTTP版本是1.1，服务器运行的HTTP版本也是1.1。
>
>    服务器
>
>    ![image-20220607150434873](https://s2.loli.net/2022/06/07/4heCaP2EpT6mltq.png)
>
>    浏览器
>
>    ![image-20220607150449770](https://s2.loli.net/2022/06/07/gRlIJtG3CKDFh75.png)
>
> 2. 你的电脑的IP地址是什么？服务器呢？
>
>    电脑IP为172.16.2.155，服务器IP为100.100.109.104
>
>    ![image-20220607150503707](https://s2.loli.net/2022/06/07/cDSKrtzBw2UbA73.png)
>
> 3. 从服务器返回到浏览器的状态代码是什么？
>
>    返回状态码为200，表示成功处理请求
>
>    ![](https://s2.loli.net/2022/06/07/sOLqfCQFutAmky1.png)
>
> 4. 您在服务器上检索到的HTML文件是在什么时候修改的？
>
>    时间为Tue, 07 Jun 2022 07:02:12 GMT
>
>    ![image-20220607150812463](https://s2.loli.net/2022/06/07/WcMdmjCr75J3wA4.png)
>
> 5. 有多少字节的内容被返回到浏览器？
>
>    有0字节的内容被返回到浏览器
>
>    ![image-20220607151039712](https://s2.loli.net/2022/06/07/vGPo4VbFlQw8dO5.png)
>
> 6. 除以上已回答过的字段外，头部还有哪些字段？在数据包内容窗口中检查原始数据，是否有未在数据包列表中显示的头部？ 
>
>    HTTP请求报文中还有Host字段、connection字段、Accept字段、User-agent字段、Accept-Encoding字段等。
>
>    ![image-20220607151208678](https://s2.loli.net/2022/06/07/3xf7M9ZrXYpJNzI.png)
>
>    HTTP响应报文中还有server字段、connection字段等。
>
>    ![image-20220607151240438](https://s2.loli.net/2022/06/07/RM9S42cetpwyOzh.png)

## 5、实验小结

### 5.1 问题与解决办法

> - 问题
>
>   使用Xftp连接服务器时，出现连接错误的情况
>
>   <img src="https://s2.loli.net/2022/04/24/BCiLywHfJoUQKg3.png" alt="image-20220424184408799"  align='left'/>
>
> - 解决方法
>
>   使用校园网连接后恢复正常，排查后发现为服务器防火墙原因
>

### 5.2 心得体会

- 本次实验报告熟系了对HTTP协议分析过程中代码及软件的操作，实现对课上知识的印证。通过这次实验，我掌握了wget命令使用中的具体流程，了解了常用HTTP协议分析软件的基本用法，提高了自身编程能力。
- 通过这些常用的HTTP分析命令操作，对HTTP协议使用时的跟踪分析，HTTP报文的结构分析，让我印证了上课所学的知识。

 